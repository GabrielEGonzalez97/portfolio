<app-section-title title="Courses ({{ courseInfoElements.length }})" />
<div class="filters-container">
    <mat-form-field>
        <mat-label>Filter by Year</mat-label>
        <mat-select multiple [(value)]="selectedYears" (selectionChange)="onFilterByYear($event.value)">
            <ng-container *ngFor="let year of years">
                <mat-option [value]="year">
                    <span class="filter-option-text">{{year}}</span>
                </mat-option>
            </ng-container>
        </mat-select>
    </mat-form-field>
    <mat-form-field>
        <mat-label>Filter by Skill</mat-label>
        <mat-select multiple [(value)]="selectedSkills" (selectionChange)="onFilterBySkill($event.value)">
            <ng-container *ngFor="let skill of skills">
                <mat-option [value]="skill.name">
                    <span class="dropdown-option-container">
                        <img [src]="skill.logoPath" [alt]="skill.name">
                        <span class="filter-option-text">{{skill.name}}</span>
                    </span>
                </mat-option>
            </ng-container>
        </mat-select>
    </mat-form-field>
    <mat-form-field>
        <mat-label>Filter by Issuing Company</mat-label>
        <mat-select multiple [(value)]="selectedIssuingCompanies"
            (selectionChange)="onFilterByIssuingCompany($event.value)">
            <ng-container *ngFor="let issuingCompany of issuingCompanies">
                <mat-option [value]="issuingCompany.companyName">
                    <span class="dropdown-option-container">
                        <img [src]="issuingCompany.companyLogoPath" [alt]="issuingCompany.companyName">
                        <span class="filter-option-text">{{issuingCompany.companyName}}</span>
                    </span>
                </mat-option>
            </ng-container>
        </mat-select>
    </mat-form-field>
</div>

<div class="active-filters" *ngIf="hasActiveFilters()">
    <mat-chip-set>
        <mat-chip *ngFor="let year of selectedYears" (removed)="removeFilter('year', year)" removable>
            {{ year }}
            <button matChipRemove aria-label="Remove year filter">
                <mat-icon>cancel</mat-icon>
            </button>
        </mat-chip>

        <mat-chip *ngFor="let skill of selectedSkills" (removed)="removeFilter('skill', skill)" removable>
            {{ skill }}
            <button matChipRemove aria-label="Remove skill filter">
                <mat-icon>cancel</mat-icon>
            </button>
        </mat-chip>

        <mat-chip *ngFor="let company of selectedIssuingCompanies" (removed)="removeFilter('company', company)"
            removable>
            {{ company }}
            <button matChipRemove aria-label="Remove company filter">
                <mat-icon>cancel</mat-icon>
            </button>
        </mat-chip>
    </mat-chip-set>

    <app-main-button buttonName="Clear Filters" [isPrimaryButton]="false" (buttonClicked)="clearFilters()" />
</div>

<div class="item-container">
    <app-pagination [currentPage]="currentPage" [totalPages]="totalPages" [onPageChange]="changePage.bind(this)">
    </app-pagination>

    <ng-container *ngFor="let courseInfo of currentPageCourses; trackBy: trackByCourseName">
        <app-item [logoPath]="courseInfo.issuingCompany.companyLogoPath"
            [logoDescription]="courseInfo.issuingCompany.companyName" [itemTitle]="courseInfo.courseName"
            [itemSubtitle]="courseInfo.issuingCompany.companyName"
            [duration]="courseInfo.durationHours ? courseInfo.expeditionDate + ' (' + courseInfo.durationHours + ' hours)' : courseInfo.expeditionDate">
            <ng-container *ngIf="courseInfo.skills">
                <div class="skills">
                    <ul>
                        <ng-container *ngFor="let courseInfoSkill of courseInfo.skills">
                            <li class="education-text-bullet-item">
                                <span>
                                    <img class="skill-logo" [src]="courseInfoSkill.logoPath"
                                        [alt]="courseInfoSkill.name">
                                    {{ courseInfoSkill.name }}
                                </span>
                            </li>
                        </ng-container>
                    </ul>
                </div>
            </ng-container>
            <app-main-button buttonName="Show credential" [href]="courseInfo.credentialUrl" />
        </app-item>
    </ng-container>

    <ng-container *ngIf="currentPageCourses.length === 0">
        <div class="no-result-found-container">
            <img src="assets/icons/no-result-found-on-web-icon.svg" alt="No result found">
            <h5>No courses found</h5>
            <p>Try changing the filters to find courses</p>
        </div>
    </ng-container>
</div>